import{r as p,e as S,j as a,y as $}from"./app-c2887d3d.js";import{H as I}from"./HumainLayout-e2d4eda8.js";import{S as L}from"./react-select.esm-d3f6a3cf.js";import{I as t}from"./InputLabel-8aee7c3a.js";import{I as i}from"./InputError-a55e57c4.js";import{T as n}from"./TextInput-deac0edd.js";import{L as A,A as q,D as B}from"./AdapterDayjs-4474912e.js";import"./Dropdown-affabd52.js";import"./index.es-64d2110f.js";import"./index-c262ad39.js";import"./AdminLayout-4b66b412.js";import"./Header-6ee0586c.js";import"./emotion-react.browser.esm-3189a1da.js";import"./clsx-0839fdbe.js";function U({auth:z}){const[x,j]=p.useState(null);new Date().toLocaleDateString("fr-FR");const r={},[h,v]=p.useState({}),[f,g]=p.useState(""),[N,C]=p.useState(!1),w=()=>{fetch("/phone-codes.json").then(s=>s.json()).then(s=>{v(s),C(!0)}).catch(s=>{console.log(s)})};S.useEffect(()=>{w()},[]);const b=s=>{j(s)},y=s=>{g(s.value)},[e,c]=p.useState({p1:"",p2:"",p3:"",n1:"",n2:"",n3:"",date:null,code:"32",tel:""}),D=s=>{s.preventDefault(),console.log("enters handleSubmit");try{const m=[e.p1,e.p2,e.p3],d=[e.n1,e.n2,e.n3];if(m.map((l,o)=>{if(l=="")m.splice(o,1);else if(!l.match(/^[A-Za-zÀ-ÿ'-]{1,16}$/))throw new Error("Prénom invalide :"+l)}),d.map((l,o)=>{if(l=="")d.splice(o,1);else if(!l.match(/^[A-Za-zÀ-ÿ'-]{1,16}$/))throw new Error("Nom invalide :"+l)}),m.length==0|d[0]=="")throw new Error("Prénom manquant");if(d.length==0|d[0]=="")throw new Error("Nom manquant");if(e.p1="",e.p2="",e.p3="",e.n1="",e.n2="",e.n3="",m.map((l,o)=>{o==0?e.p1=l:o==1?e.p2=l:o==2&&(e.p3=l)}),d.map((l,o)=>{o==0?e.n1=l:o==1?e.n2=l:o==2&&(e.n3=l)}),!x)throw new Error("Date de naissance manquante");if(e.date=x,f&&(e.code=f),!e.tel)throw new Error("Numéro de téléphone manquant");if(!e.tel.match(/^[0-9]{9}$/))throw new Error("Numéro de téléphone invalide");let u=e.tel;u=u.replace(/(\d{3})(\d{3})(\d{3})/,"$1 $2 $3");const P=new Date(x),E={prenom1:e.p1,prenom2:e.p2,prenom3:e.p3,nom1:e.n1,nom2:e.n2,nom3:e.n3,date_de_naissance:P,telephone:"+("+e.code+") "+u};$.post("/humain",E)}catch(m){console.log(m),alert(m)}};return a.jsx(I,{children:a.jsxs("form",{className:"flex flex-col space-y-4 text-gray-900",onSubmit:D,children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Créer un humain"}),a.jsxs("div",{className:"flex flex-row space-x-4",children:[a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx(t,{value:"Prénom 1"}),a.jsx(n,{placeholder:"Prénom 1",value:e.p1,onChange:s=>c({...e,p1:s.target.value})}),a.jsx(i,{message:r.firstName1})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx(t,{value:"Prénom 2"}),a.jsx(n,{placeholder:"Prénom 2",value:e.p2,onChange:s=>c({...e,p2:s.target.value})}),a.jsx(i,{message:r.firstName2})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx(t,{value:"Prénom 3"}),a.jsx(n,{placeholder:"Prénom 3",value:e.p3,onChange:s=>c({...e,p3:s.target.value})}),a.jsx(i,{message:r.firstName3})]})]}),a.jsxs("div",{className:"flex flex-row space-x-4",children:[a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx(t,{value:"Nom 1"}),a.jsx(n,{placeholder:"Nom 1",value:e.n1,onChange:s=>c({...e,n1:s.target.value})}),a.jsx(i,{message:r.lastName1})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx(t,{value:"Nom 2"}),a.jsx(n,{placeholder:"Nom 2",value:e.n2,onChange:s=>c({...e,n2:s.target.value})}),a.jsx(i,{message:r.lastName2})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx(t,{value:"Nom 3"}),a.jsx(n,{placeholder:"Nom 3",value:e.n3,onChange:s=>c({...e,n3:s.target.value})}),a.jsx(i,{message:r.lastName3})]})]}),a.jsxs("div",{className:"flex flex-row space-x-4",children:[a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx(t,{value:"Date de naissance"}),a.jsx(A,{dateAdapter:q,children:a.jsx(B,{value:x,onChange:b,renderInput:s=>a.jsx(n,{...s,placeholder:"Date de naissance"})})})]}),a.jsxs("div",{className:"flex flex-row space-x-2",children:[a.jsxs("div",{children:[a.jsx(t,{value:"Code pays"}),N&&a.jsx(L,{className:"w-18",defaultValue:{value:h.BE,label:"BE"},options:Object.keys(h).map(s=>({value:h[s],label:s})),onChange:s=>y(s)})]}),a.jsxs("div",{children:[a.jsx(t,{value:"Numéro de téléphone"}),a.jsx(n,{placeholder:"Numéro de téléphone",value:e.tel,onChange:s=>c({...e,tel:s.target.value})}),a.jsx(i,{message:r.phoneNumber})]})]})]}),a.jsx("button",{type:"submit",className:"bg-primBlue hover:bg-primRed text-white font-bold py-2 px-4 rounded",children:"Submit"})]})})}export{U as default};
